/**
 * 
 */

var data = [];
var map;
function initMapv() {
	map = new BMap.Map("WMMAP", {
		minZoom : 12,
		maxZoom : 17,
		enableMapClick : false
	});
	// 创建点坐标
	map.centerAndZoom("济宁市", 13);
	map.enableScrollWheelZoom(true); // 开启鼠标滚轮缩放
	map.setMapStyle({
		style : 'light'
	});
	map.clearOverlays();

	for (var i = 0; i < points.length; i++) {
		data.push({
			geometry : {
				type : 'Point',
				coordinates : [ points[i].lng, points[i].lat ]
			},
			count : points[i].count
		});
	}
//	console.log(data)
	var dataSet = new mapv.DataSet(data);

	var options = {
		fillStyle : 'rgba(255, 50, 50, 0.6)',
		shadowColor : 'rgba(255, 50, 50, 1)',
		shadowBlur : 30,
		globalCompositeOperation : 'lighter',
		methods : {
			click : function(item) {
				console.log(item);
			}
		},
		size : 5,
		draw : 'simple'
	}

	var mapvLayer = new mapv.baiduMapLayer(map, dataSet, options);

	dataSet.set(data); // 修改数据

	mapvLayer.show(); // 显示图层
	// mapvLayer.hide(); // 删除图层
}

/**
 * 测试数据
 */
var points = [ {
	"lng" : 116.606,
	"lat" : 35.404,
	"count" : 49
}, {
	"lng" : 116.568,
	"lat" : 35.3961,
	"count" : 58
}, {
	"lng" : 116.592,
	"lat" : 35.4005,
	"count" : 36
}, {
	"lng" : 116.573,
	"lat" : 35.3906,
	"count" : 50
}, {
	"lng" : 116.581,
	"lat" : 35.3881,
	"count" : 51
}, {
	"lng" : 116.601,
	"lat" : 35.3879,
	"count" : 61
}, {
	"lng" : 116.575,
	"lat" : 35.38,
	"count" : 57
}, {
	"lng" : 116.567,
	"lat" : 35.3643,
	"count" : 46
}, {
	"lng" : 116.578,
	"lat" : 35.3484,
	"count" : 57
}, {
	"lng" : 116.594,
	"lat" : 35.3661,
	"count" : 51
}, {
	"lng" : 116.56865,
	"lat" : 35.347446,
	"count" : 21
}, {
	"lng" : 116.537,
	"lat" : 35.4769,
	"count" : 65
}, {
	"lng" : 116.593,
	"lat" : 35.3957,
	"count" : 44
}, {
	"lng" : 116.587,
	"lat" : 35.3977,
	"count" : 35
}, {
	"lng" : 116.568,
	"lat" : 35.4055,
	"count" : 42
}, {
	"lng" : 116.598,
	"lat" : 35.3896,
	"count" : 66
}, {
	"lng" : 116.652,
	"lat" : 35.3886,
	"count" : 59
}, {
	"lng" : 116.616,
	"lat" : 35.383,
	"count" : 43
}, {
	"lng" : 116.621,
	"lat" : 35.3977,
	"count" : 31
}, {
	"lng" : 116.629,
	"lat" : 35.3899,
	"count" : 65
}, {
	"lng" : 116.649,
	"lat" : 35.4039,
	"count" : 29
}, {
	"lng" : 116.525,
	"lat" : 35.3464,
	"count" : 53
}, {
	"lng" : 116.652,
	"lat" : 35.421,
	"count" : 51
}, {
	"lng" : 116.609,
	"lat" : 35.422,
	"count" : 55
}, {
	"lng" : 116.58329,
	"lat" : 35.41408,
	"count" : 30
}, {
	"lng" : 116.605,
	"lat" : 35.4144,
	"count" : 52
}, {
	"lng" : 116.597,
	"lat" : 35.4142,
	"count" : 53
}, {
	"lng" : 116.617,
	"lat" : 35.4134,
	"count" : 47
}, {
	"lng" : 116.584,
	"lat" : 35.4095,
	"count" : 42
}, {
	"lng" : 116.581,
	"lat" : 35.4251,
	"count" : 42
}, {
	"lng" : 116.575,
	"lat" : 35.4164,
	"count" : 44
}, {
	"lng" : 116.582,
	"lat" : 35.404,
	"count" : 43
}, {
	"lng" : 116.572,
	"lat" : 35.4269,
	"count" : 50
}, {
	"lng" : 116.563,
	"lat" : 35.4046,
	"count" : 54
}, {
	"lng" : 116.597,
	"lat" : 35.4286,
	"count" : 57
}, {
	"lng" : 116.559,
	"lat" : 35.4252,
	"count" : 57
}, {
	"lng" : 116.565,
	"lat" : 35.3868,
	"count" : 49
}, {
	"lng" : 116.583,
	"lat" : 35.3673,
	"count" : 49
}, {
	"lng" : 116.64159,
	"lat" : 35.387894,
	"count" : 30
}, {
	"lng" : 116.538,
	"lat" : 35.4378,
	"count" : 56
}, {
	"lng" : 116.561,
	"lat" : 35.4885,
	"count" : 71
}, {
	"lng" : 116.575485,
	"lat" : 35.42651,
	"count" : 52
}, {
	"lng" : 116.56531,
	"lat" : 35.357567,
	"count" : 51
}, {
	"lng" : 116.49332,
	"lat" : 35.461494,
	"count" : 64
}, {
	"lng" : 116.52,
	"lat" : 35.4608,
	"count" : 57
}, {
	"lng" : 116.487,
	"lat" : 35.3877,
	"count" : 37
}, {
	"lng" : 116.67981,
	"lat" : 35.346767,
	"count" : 35
}, {
	"lng" : 116.587,
	"lat" : 35.5045,
	"count" : 40
}, {
	"lng" : 116.537,
	"lat" : 35.4927,
	"count" : 48
}, {
	"lng" : 116.465,
	"lat" : 35.4268,
	"count" : 55
}, {
	"lng" : 116.508,
	"lat" : 35.4385,
	"count" : 57
}, {
	"lng" : 116.5601,
	"lat" : 35.37745,
	"count" : 49
}, {
	"lng" : 116.7683,
	"lat" : 35.405804,
	"count" : 66
}, {
	"lng" : 116.67146,
	"lat" : 35.52118,
	"count" : 43
}, {
	"lng" : 116.522,
	"lat" : 35.3641,
	"count" : 47
}, {
	"lng" : 116.47176,
	"lat" : 35.441395,
	"count" : 78
}, {
	"lng" : 116.571,
	"lat" : 35.4361,
	"count" : 53
}, {
	"lng" : 116.551,
	"lat" : 35.4304,
	"count" : 50
}, {
	"lng" : 116.57889,
	"lat" : 35.362316,
	"count" : 56
}, {
	"lng" : 116.60448,
	"lat" : 35.420643,
	"count" : 43
}, {
	"lng" : 116.57874,
	"lat" : 35.400787,
	"count" : 23
}, {
	"lng" : 116.55816,
	"lat" : 35.290943,
	"count" : 37
}, {
	"lng" : 116.45081,
	"lat" : 35.33939,
	"count" : 22
}, {
	"lng" : 116.554,
	"lat" : 35.3471,
	"count" : 54
}, {
	"lng" : 116.56005,
	"lat" : 35.41927,
	"count" : 47
}, {
	"lng" : 116.572,
	"lat" : 35.3698,
	"count" : 41
}, {
	"lng" : 116.55968,
	"lat" : 35.405224,
	"count" : 54
}, {
	"lng" : 116.37233,
	"lat" : 35.360245,
	"count" : 284
}, {
	"lng" : 116.539,
	"lat" : 35.4074,
	"count" : 170
}, {
	"lng" : 116.593,
	"lat" : 35.4218,
	"count" : 187
}, {
	"lng" : 116.593,
	"lat" : 35.4097,
	"count" : 133
}, {
	"lng" : 116.636,
	"lat" : 35.4233,
	"count" : 145
}, {
	"lng" : 116.379616,
	"lat" : 35.352562,
	"count" : 145
}, {
	"lng" : 116.626,
	"lat" : 35.4138,
	"count" : 136
}, {
	"lng" : 116.513,
	"lat" : 35.3794,
	"count" : 43
}, {
	"lng" : 116.489,
	"lat" : 35.4102,
	"count" : 34
}, {
	"lng" : 116.657,
	"lat" : 35.3213,
	"count" : 64
}, {
	"lng" : 116.59034,
	"lat" : 35.42964,
	"count" : 40
}, {
	"lng" : 116.45169,
	"lat" : 35.356323,
	"count" : 112
}, {
	"lng" : 116.7852,
	"lat" : 35.480118,
	"count" : 108
}, {
	"lng" : 117.065,
	"lat" : 35.5967,
	"count" : 148
}, {
	"lng" : 116.71139,
	"lat" : 35.398876,
	"count" : 111
}, {
	"lng" : 116.797356,
	"lat" : 35.57633,
	"count" : 249
}, {
	"lng" : 116.955185,
	"lat" : 35.371967,
	"count" : 137
}, {
	"lng" : 116.64232,
	"lat" : 35.282764,
	"count" : 138
}, {
	"lng" : 116.306496,
	"lat" : 35.379875,
	"count" : 140
}, {
	"lng" : 116.873856,
	"lat" : 35.42357,
	"count" : 215
}, {
	"lng" : 116.41531,
	"lat" : 35.371067,
	"count" : 101
}, {
	"lng" : 116.94436,
	"lat" : 35.372555,
	"count" : 161
}, {
	"lng" : 116.78174,
	"lat" : 35.56214,
	"count" : 103
}, {
	"lng" : 116.65417,
	"lat" : 35.45195,
	"count" : 168
}, {
	"lng" : 116.706,
	"lat" : 35.3886,
	"count" : 111
}, {
	"lng" : 116.64661,
	"lat" : 35.432426,
	"count" : 117
}, {
	"lng" : 116.93076,
	"lat" : 35.28972,
	"count" : 190
}, {
	"lng" : 116.67219,
	"lat" : 35.45279,
	"count" : 220
}, {
	"lng" : 117.09002,
	"lat" : 35.6113,
	"count" : 131
}, {
	"lng" : 116.78058,
	"lat" : 35.311275,
	"count" : 178
}, {
	"lng" : 116.46549,
	"lat" : 35.3713,
	"count" : 126
}, {
	"lng" : 116.54508,
	"lat" : 35.376698,
	"count" : 207
}, {
	"lng" : 116.69647,
	"lat" : 35.4477,
	"count" : 127
}, {
	"lng" : 116.60009,
	"lat" : 35.37279,
	"count" : 135
}, {
	"lng" : 116.95357,
	"lat" : 35.445274,
	"count" : 127
}, {
	"lng" : 116.53866,
	"lat" : 35.395775,
	"count" : 192
}, {
	"lng" : 116.88581,
	"lat" : 35.309315,
	"count" : 136
}, {
	"lng" : 116.67122,
	"lat" : 35.44326,
	"count" : 160
}, {
	"lng" : 116.5991,
	"lat" : 35.452534,
	"count" : 138
}, {
	"lng" : 116.59051,
	"lat" : 35.460823,
	"count" : 125
}, {
	"lng" : 116.62967,
	"lat" : 35.43525,
	"count" : 125
}, {
	"lng" : 116.945526,
	"lat" : 35.29386,
	"count" : 126
}, {
	"lng" : 116.943306,
	"lat" : 35.37925,
	"count" : 209
}, {
	"lng" : 116.582016,
	"lat" : 35.447514,
	"count" : 174
}, {
	"lng" : 116.4289,
	"lat" : 35.39604,
	"count" : 111
}, {
	"lng" : 116.808685,
	"lat" : 35.444176,
	"count" : 148
}, {
	"lng" : 116.89975,
	"lat" : 35.268574,
	"count" : 217
}, {
	"lng" : 116.95629,
	"lat" : 35.373653,
	"count" : 141
}, {
	"lng" : 116.57917,
	"lat" : 35.41002,
	"count" : 123
}, {
	"lng" : 116.69749,
	"lat" : 35.377632,
	"count" : 191
}, {
	"lng" : 116.89168,
	"lat" : 35.381905,
	"count" : 195
}, {
	"lng" : 116.569435,
	"lat" : 35.403828,
	"count" : 122
}, {
	"lng" : 116.90461,
	"lat" : 35.43166,
	"count" : 124
}, {
	"lng" : 116.71317,
	"lat" : 35.43981,
	"count" : 229
}, {
	"lng" : 116.59443,
	"lat" : 35.434803,
	"count" : 126
}, {
	"lng" : 116.6731,
	"lat" : 35.385666,
	"count" : 155
}, {
	"lng" : 116.83961,
	"lat" : 35.35426,
	"count" : 204
}, {
	"lng" : 116.58247,
	"lat" : 35.43302,
	"count" : 121
}, {
	"lng" : 116.920235,
	"lat" : 35.604267,
	"count" : 110
}, {
	"lng" : 116.57754,
	"lat" : 35.467056,
	"count" : 143
}, {
	"lng" : 116.79261,
	"lat" : 35.568447,
	"count" : 135
}, {
	"lng" : 116.439026,
	"lat" : 35.479847,
	"count" : 107
}, {
	"lng" : 116.60624,
	"lat" : 35.41631,
	"count" : 125
}, {
	"lng" : 116.94233,
	"lat" : 35.60295,
	"count" : 198
}, {
	"lng" : 116.54693,
	"lat" : 35.423523,
	"count" : 131
}, {
	"lng" : 116.60207,
	"lat" : 35.366833,
	"count" : 133
}, {
	"lng" : 116.337,
	"lat" : 35.374977,
	"count" : 155
}, {
	"lng" : 116.95494,
	"lat" : 35.44573,
	"count" : 150
}, {
	"lng" : 116.6143,
	"lat" : 35.441177,
	"count" : 167
}, {
	"lng" : 116.79186,
	"lat" : 35.52596,
	"count" : 203
}, {
	"lng" : 116.59059,
	"lat" : 35.463417,
	"count" : 148
}, {
	"lng" : 116.33657,
	"lat" : 35.372314,
	"count" : 131
}, {
	"lng" : 116.37222,
	"lat" : 35.357113,
	"count" : 146
}, {
	"lng" : 116.62647,
	"lat" : 35.41381,
	"count" : 128
}, {
	"lng" : 116.65282,
	"lat" : 35.42621,
	"count" : 7
}, {
	"lng" : 116.59287,
	"lat" : 35.385498,
	"count" : 147
}, {
	"lng" : 116.38176,
	"lat" : 35.35296,
	"count" : 102
}, {
	"lng" : 116.623405,
	"lat" : 35.44927,
	"count" : 133
}, {
	"lng" : 116.552574,
	"lat" : 35.413143,
	"count" : 123
}, {
	"lng" : 116.586716,
	"lat" : 35.396015,
	"count" : 135
}, {
	"lng" : 116.75351,
	"lat" : 35.31392,
	"count" : 172
}, {
	"lng" : 116.76849,
	"lat" : 35.58466,
	"count" : 161
}, {
	"lng" : 116.599464,
	"lat" : 35.416836,
	"count" : 147
}, {
	"lng" : 116.57207,
	"lat" : 35.37355,
	"count" : 144
}, {
	"lng" : 116.88465,
	"lat" : 35.35514,
	"count" : 235
}, {
	"lng" : 116.803085,
	"lat" : 35.54784,
	"count" : 131
}, {
	"lng" : 116.560844,
	"lat" : 35.447197,
	"count" : 191
}, {
	"lng" : 116.79203,
	"lat" : 35.311565,
	"count" : 135
}, {
	"lng" : 116.874176,
	"lat" : 35.34489,
	"count" : 135
}, {
	"lng" : 116.58709,
	"lat" : 35.426743,
	"count" : 142
}, {
	"lng" : 116.31842,
	"lat" : 35.366238,
	"count" : 118
}, {
	"lng" : 116.59679,
	"lat" : 35.377846,
	"count" : 148
}, {
	"lng" : 116.60553,
	"lat" : 35.429977,
	"count" : 187
}, {
	"lng" : 116.56294,
	"lat" : 35.414673,
	"count" : 118
}, {
	"lng" : 116.59903,
	"lat" : 35.366966,
	"count" : 157
}, {
	"lng" : 117.0693,
	"lat" : 35.615913,
	"count" : 147
}, {
	"lng" : 116.92413,
	"lat" : 35.617954,
	"count" : 131
}, {
	"lng" : 116.67774,
	"lat" : 35.3964,
	"count" : 146
}, {
	"lng" : 116.80059,
	"lat" : 35.52352,
	"count" : 118
}, {
	"lng" : 116.85302,
	"lat" : 35.408207,
	"count" : 129
}, {
	"lng" : 116.61553,
	"lat" : 35.441257,
	"count" : 264
}, {
	"lng" : 116.58533,
	"lat" : 35.379726,
	"count" : 138
}, {
	"lng" : 116.81902,
	"lat" : 35.402023,
	"count" : 205
}, {
	"lng" : 116.83199,
	"lat" : 35.388832,
	"count" : 235
}, {
	"lng" : 116.683586,
	"lat" : 35.40781,
	"count" : 126
}, {
	"lng" : 116.56098,
	"lat" : 35.399303,
	"count" : 117
}, {
	"lng" : 116.668045,
	"lat" : 35.26423,
	"count" : 178
}, {
	"lng" : 116.931465,
	"lat" : 35.444168,
	"count" : 292
}, {
	"lng" : 116.91358,
	"lat" : 35.437996,
	"count" : 0
}, {
	"lng" : 116.75622,
	"lat" : 35.335396,
	"count" : 184
} ];